var e=globalThis,t={},r={},i=e.parcelRequire94c2;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in r){var i=r[e];delete r[e];var n={id:e,exports:{}};return t[e]=n,i.call(n.exports,n,n.exports),n.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},e.parcelRequire94c2=i),(0,i.register)("27Lyk",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>r,set:e=>r=e,enumerable:!0,configurable:!0});var r,i=new Map;r=function(e,t){for(var r=0;r<t.length-1;r+=2)i.set(t[r],{baseUrl:e,path:t[r+1]})}}),i("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["earC1","index.37e483dd.js","b7sw5","service-worker.2c89527d.js","ht3zs","index.5b4f745e.js"]'));var n=i("47Mwn"),a=i("6AR8M");const o=new a.GoogleAuthProvider;var c={};c=new URL("service-worker.2c89527d.js",import.meta.url).toString();const s=new URL(c);function l(){(0,a.signInWithPopup)(n.auth,o).then(e=>{let t=e.user;localStorage.setItem("email",JSON.stringify(t.email)),window.location.href="transactions.html"}).catch(e=>{console.error("Login Error:",e.message)})}"serviceWorker"in navigator&&navigator.serviceWorker.register(s.href,{scope:"/budget-web-app/"}).then(()=>console.log("Service Worker Registered for scope:",s.href)).catch(e=>console.error("Service Worker Error:",e)),document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("googleLoginBtn");e?e.addEventListener("click",l):console.error("Sign-in button not found.")});const u=()=>window.PublicKeyCredential&&window.navigator.credentials&&window.navigator.credentials.create,d=e=>btoa(String.fromCharCode(...new Uint8Array(e))),g=e=>{let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r.buffer};new class{constructor(){this.biometricAuthBtn=document.getElementById("biometricAuthBtn"),this.setupEventListeners()}setupEventListeners(){this.biometricAuthBtn&&this.biometricAuthBtn.addEventListener("click",()=>this.authenticate())}async authenticate(){if(!u()){alert("Biometric authentication is not supported in this browser.");return}try{localStorage.getItem("biometricCredentialId")?await this.login():await this.register()}catch(e){console.error("Biometric authentication error:",e),alert("Biometric authentication failed. Please try again.")}}async register(){try{let e=new Uint8Array(16);crypto.getRandomValues(e);let t={challenge:new Uint8Array(32),rp:{name:"Budget Planner",id:window.location.hostname},user:{id:e,name:"user@example.com",displayName:"Budget Planner User"},pubKeyCredParams:[{type:"public-key",alg:-7}],authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required",requireResidentKey:!1},timeout:6e4,attestation:"none"};crypto.getRandomValues(t.challenge);let r=await navigator.credentials.create({publicKey:t}),i=d(r.rawId);localStorage.setItem("biometricCredentialId",i),alert("Biometric registration successful!"),await this.login()}catch(e){console.error("Registration error:",e),alert("Biometric registration failed. Please try again.")}}async login(){try{let e=localStorage.getItem("biometricCredentialId");if(!e)throw Error("No credentials found. Please register first.");let t=new Uint8Array(32);crypto.getRandomValues(t);let r={challenge:t,allowCredentials:[{type:"public-key",id:g(e),transports:["internal"]}],timeout:6e4,userVerification:"required"};await navigator.credentials.get({publicKey:r})&&this.onSuccessfulAuth()}catch(e){console.error("Authentication error:",e),alert("Biometric authentication failed. Please try again.")}}onSuccessfulAuth(){let e=document.getElementById("authScreen");e&&(e.style.display="none"),alert("Successfully authenticated with biometrics!")}};
//# sourceMappingURL=index.37e483dd.js.map
