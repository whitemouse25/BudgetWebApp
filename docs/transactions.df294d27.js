let t;var e,n,o,r,i,s,a,l,c,u,d,h,f,g,p,m,E,y,v,C,w,I,O,T,N,_,A,b,R,S,M,x,L,B,P,F,D,U,$,k,H,G,j,q,K,Y,z,J,Q,V,X,W,Z,tt,te,tn,to,tr,ti,ts,ta,tl,tc,tu,td,th,tf,tg,tp,tm,tE,ty,tv,tC,tw,tI,tO,tT,tN,t_,tA,tb,tR,tS,tM,tx,tL,tB,tP,tF,tD=globalThis,tU={},t$={},tk=tD.parcelRequire94c2;null==tk&&((tk=function(t){if(t in tU)return tU[t].exports;if(t in t$){var e=t$[t];delete t$[t];var n={id:t,exports:{}};return tU[t]=n,e.call(n.exports,n,n.exports),n.exports}var o=Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){t$[t]=e},tD.parcelRequire94c2=tk),tk.register;var tH=tk("47Mwn"),tG=tk("6AR8M"),tj=tk("ilpIi"),tq={};tq=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then};const tK=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];g=function(t){if(!t)throw Error('"version" cannot be null or undefined');if(t<1||t>40)throw Error('"version" should be in range from 1 to 40');return 4*t+17},p=function(t){return tK[t]},m=function(t){let e=0;for(;0!==t;)e++,t>>>=1;return e},E=function(e){if("function"!=typeof e)throw Error('"toSJISFunc" is not a valid function.');t=e},y=function(){return void 0!==t},v=function(e){return t(e)},C={bit:1},w={bit:0},I={bit:3},O={bit:2},T=function(t){return t&&void 0!==t.bit&&t.bit>=0&&t.bit<4},N=function(t,e){if(T(t))return t;try{return function(t){if("string"!=typeof t)throw Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return C;case"m":case"medium":return w;case"q":case"quartile":return I;case"h":case"high":return O;default:throw Error("Unknown EC Level: "+t)}}(t)}catch(t){return e}};var tY={};function tz(){this.buffer=[],this.length=0}tz.prototype={get:function(t){let e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},tY=tz;var tJ={};function tQ(t){if(!t||t<1)throw Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}tQ.prototype.set=function(t,e,n,o){let r=t*this.size+e;this.data[r]=n,o&&(this.reservedBit[r]=!0)},tQ.prototype.get=function(t,e){return this.data[t*this.size+e]},tQ.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},tQ.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},tJ=tQ,_=function(t){if(1===t)return[];let e=Math.floor(t/7)+2,n=g(t),o=145===n?26:2*Math.ceil((n-13)/(2*e-2)),r=[n-7];for(let t=1;t<e-1;t++)r[t]=r[t-1]-o;return r.push(6),r.reverse()},A=function(t){let e=[],n=_(t),o=n.length;for(let t=0;t<o;t++)for(let r=0;r<o;r++)(0!==t||0!==r)&&(0!==t||r!==o-1)&&(t!==o-1||0!==r)&&e.push([n[t],n[r]]);return e},b=function(t){let e=g(t);return[[0,0],[e-7,0],[0,e-7]]},R={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const tV={N1:3,N2:3,N3:40,N4:10};S=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},M=function(t){return S(t)?parseInt(t,10):void 0},x=function(t){let e=t.size,n=0,o=0,r=0,i=null,s=null;for(let a=0;a<e;a++){o=r=0,i=s=null;for(let l=0;l<e;l++){let e=t.get(a,l);e===i?o++:(o>=5&&(n+=tV.N1+(o-5)),i=e,o=1),(e=t.get(l,a))===s?r++:(r>=5&&(n+=tV.N1+(r-5)),s=e,r=1)}o>=5&&(n+=tV.N1+(o-5)),r>=5&&(n+=tV.N1+(r-5))}return n},L=function(t){let e=t.size,n=0;for(let o=0;o<e-1;o++)for(let r=0;r<e-1;r++){let e=t.get(o,r)+t.get(o,r+1)+t.get(o+1,r)+t.get(o+1,r+1);(4===e||0===e)&&n++}return n*tV.N2},B=function(t){let e=t.size,n=0,o=0,r=0;for(let i=0;i<e;i++){o=r=0;for(let s=0;s<e;s++)o=o<<1&2047|t.get(i,s),s>=10&&(1488===o||93===o)&&n++,r=r<<1&2047|t.get(s,i),s>=10&&(1488===r||93===r)&&n++}return n*tV.N3},P=function(t){let e=0,n=t.data.length;for(let o=0;o<n;o++)e+=t.data[o];return Math.abs(Math.ceil(100*e/n/5)-10)*tV.N4},F=function(t,e){let n=e.size;for(let o=0;o<n;o++)for(let r=0;r<n;r++)e.isReserved(r,o)||e.xor(r,o,function(t,e,n){switch(t){case R.PATTERN000:return(e+n)%2==0;case R.PATTERN001:return e%2==0;case R.PATTERN010:return n%3==0;case R.PATTERN011:return(e+n)%3==0;case R.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case R.PATTERN101:return e*n%2+e*n%3==0;case R.PATTERN110:return(e*n%2+e*n%3)%2==0;case R.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw Error("bad maskPattern:"+t)}}(t,r,o))},D=function(t,e){let n=Object.keys(R).length,o=0,r=1/0;for(let i=0;i<n;i++){e(i),F(i,t);let n=x(t)+L(t)+B(t)+P(t);F(i,t),n<r&&(r=n,o=i)}return o};const tX=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],tW=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];U=function(t,e){switch(e){case C:return tX[(t-1)*4+0];case w:return tX[(t-1)*4+1];case I:return tX[(t-1)*4+2];case O:return tX[(t-1)*4+3];default:return}},$=function(t,e){switch(e){case C:return tW[(t-1)*4+0];case w:return tW[(t-1)*4+1];case I:return tW[(t-1)*4+2];case O:return tW[(t-1)*4+3];default:return}};var tZ={};const t0=new Uint8Array(512),t1=new Uint8Array(256);function t2(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}!function(){let t=1;for(let e=0;e<255;e++)t0[e]=t,t1[t]=e,256&(t<<=1)&&(t^=285);for(let t=255;t<512;t++)t0[t]=t0[t-255]}(),j=function(t){return t0[t]},q=function(t,e){return 0===t||0===e?0:t0[t1[t]+t1[e]]},k=function(t,e){let n=new Uint8Array(t.length+e.length-1);for(let o=0;o<t.length;o++)for(let r=0;r<e.length;r++)n[o+r]^=q(t[o],e[r]);return n},H=function(t,e){let n=new Uint8Array(t);for(;n.length-e.length>=0;){let t=n[0];for(let o=0;o<e.length;o++)n[o]^=q(e[o],t);let o=0;for(;o<n.length&&0===n[o];)o++;n=n.slice(o)}return n},G=function(t){let e=new Uint8Array([1]);for(let n=0;n<t;n++)e=k(e,new Uint8Array([1,j(n)]));return e},t2.prototype.initialize=function(t){this.degree=t,this.genPoly=G(this.degree)},t2.prototype.encode=function(t){if(!this.genPoly)throw Error("Encoder not initialized");let e=new Uint8Array(t.length+this.degree);e.set(t);let n=H(e,this.genPoly),o=this.degree-n.length;if(o>0){let t=new Uint8Array(this.degree);return t.set(n,o),t}return n},tZ=t2,ti=function(t){return!isNaN(t)&&t>=1&&t<=40};const t4="[0-9]+";let t3="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";const t8="(?:(?![A-Z0-9 $%*+\\-./:]|"+(t3=t3.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";ts=RegExp(t3,"g"),ta=RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),tl=RegExp(t8,"g"),tc=RegExp(t4,"g"),tu=RegExp("[A-Z $%*+\\-./:]+","g");const t5=RegExp("^"+t3+"$"),t6=RegExp("^"+t4+"$"),t7=RegExp("^[A-Z0-9 $%*+\\-./:]+$");td=function(t){return t5.test(t)},th=function(t){return t6.test(t)},tf=function(t){return t7.test(t)},Q={id:"Numeric",bit:1,ccBits:[10,12,14]},V={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},X={id:"Byte",bit:4,ccBits:[8,16,16]},W={id:"Kanji",bit:8,ccBits:[8,10,12]},Z={bit:-1},tt=function(t,e){if(!t.ccBits)throw Error("Invalid mode: "+t);if(!ti(e))throw Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},te=function(t){return th(t)?Q:tf(t)?V:td(t)?W:X},tn=function(t){if(t&&t.id)return t.id;throw Error("Invalid mode")},to=function(t){return t&&t.bit&&t.ccBits},tr=function(t,e){if(to(t))return t;try{return function(t){if("string"!=typeof t)throw Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return Q;case"alphanumeric":return V;case"kanji":return W;case"byte":return X;default:throw Error("Unknown mode: "+t)}}(t)}catch(t){return e}};const t9=m(7973);K=function(t,e){return ti(t)?parseInt(t,10):e},Y=function(t,e,n){if(!ti(t))throw Error("Invalid QR Code version");void 0===n&&(n=X);let o=(p(t)-$(t,e))*8;if(n===Z)return o;let r=o-(tt(n,t)+4);switch(n){case Q:return Math.floor(r/10*3);case V:return Math.floor(r/11*2);case W:return Math.floor(r/13);default:return Math.floor(r/8)}},z=function(t,e){let n;let o=N(e,w);if(Array.isArray(t)){if(t.length>1)return function(t,e){for(let n=1;n<=40;n++)if(function(t,e){let n=0;return t.forEach(function(t){let o=tt(t.mode,e)+4;n+=o+t.getBitsLength()}),n}(t,n)<=Y(n,e,Z))return n}(t,o);if(0===t.length)return 1;n=t[0]}else n=t;return function(t,e,n){for(let o=1;o<=40;o++)if(e<=Y(o,n,t))return o}(n.mode,n.getLength(),o)},J=function(t){if(!ti(t)||t<7)throw Error("Invalid QR Code version");let e=t<<12;for(;m(e)-t9>=0;)e^=7973<<m(e)-t9;return t<<12|e};const et=m(1335);tg=function(t,e){let n=t.bit<<3|e,o=n<<10;for(;m(o)-et>=0;)o^=1335<<m(o)-et;return(n<<10|o)^21522};var ee={};function en(t){this.mode=Q,this.data=t.toString()}en.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},en.prototype.getLength=function(){return this.data.length},en.prototype.getBitsLength=function(){return en.getBitsLength(this.data.length)},en.prototype.write=function(t){let e,n;for(e=0;e+3<=this.data.length;e+=3)n=parseInt(this.data.substr(e,3),10),t.put(n,10);let o=this.data.length-e;o>0&&(n=parseInt(this.data.substr(e),10),t.put(n,3*o+1))},ee=en;var eo={};const er=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ei(t){this.mode=V,this.data=t}ei.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},ei.prototype.getLength=function(){return this.data.length},ei.prototype.getBitsLength=function(){return ei.getBitsLength(this.data.length)},ei.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=45*er.indexOf(this.data[e]);n+=er.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(er.indexOf(this.data[e]),6)},eo=ei;var es={};function ea(t){this.mode=X,"string"==typeof t?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}ea.getBitsLength=function(t){return 8*t},ea.prototype.getLength=function(){return this.data.length},ea.prototype.getBitsLength=function(){return ea.getBitsLength(this.data.length)},ea.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)},es=ea;var el={};function ec(t){this.mode=W,this.data=t}ec.getBitsLength=function(t){return 13*t},ec.prototype.getLength=function(){return this.data.length},ec.prototype.getBitsLength=function(){return ec.getBitsLength(this.data.length)},ec.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=v(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");n=(n>>>8&255)*192+(255&n),t.put(n,13)}},el=ec;var eu={},ed={single_source_shortest_paths:function(t,e,n){var o,r,i,s,a,l,c,u={},d={};d[e]=0;var h=ed.PriorityQueue.make();for(h.push(e,0);!h.empty();)for(i in r=(o=h.pop()).value,s=o.cost,a=t[r]||{})a.hasOwnProperty(i)&&(l=s+a[i],c=d[i],(void 0===d[i]||c>l)&&(d[i]=l,h.push(i,l),u[i]=r));if(void 0!==n&&void 0===d[n])throw Error(["Could not find a path from ",e," to ",n,"."].join(""));return u},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],o=e;o;)n.push(o),t[o],o=t[o];return n.reverse(),n},find_path:function(t,e,n){var o=ed.single_source_shortest_paths(t,e,n);return ed.extract_shortest_path_from_predecessor_list(o,n)},PriorityQueue:{make:function(t){var e,n=ed.PriorityQueue,o={};for(e in t=t||{},n)n.hasOwnProperty(e)&&(o[e]=n[e]);return o.queue=[],o.sorter=t.sorter||n.default_sorter,o},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){this.queue.push({value:t,cost:e}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};function eh(t){return unescape(encodeURIComponent(t)).length}function ef(t,e,n){let o;let r=[];for(;null!==(o=t.exec(n));)r.push({data:o[0],index:o.index,mode:e,length:o[0].length});return r}function eg(t){let e,n;let o=ef(tc,Q,t),r=ef(tu,V,t);return y()?(e=ef(tl,X,t),n=ef(ts,W,t)):(e=ef(ta,X,t),n=[]),o.concat(r,e,n).sort(function(t,e){return t.index-e.index}).map(function(t){return{data:t.data,mode:t.mode,length:t.length}})}function ep(t,e){switch(e){case Q:return ee.getBitsLength(t);case V:return eo.getBitsLength(t);case W:return el.getBitsLength(t);case X:return es.getBitsLength(t)}}function em(t,e){let n;let o=te(t);if((n=tr(e,o))!==X&&n.bit<o.bit)throw Error('"'+t+'" cannot be encoded with mode '+tn(n)+".\n Suggested mode is: "+tn(o));switch(n!==W||y()||(n=X),n){case Q:return new ee(t);case V:return new eo(t);case W:return new el(t);case X:return new es(t)}}function eE(t,e,n){let o,r;let i=t.size,s=tg(e,n);for(o=0;o<15;o++)r=(s>>o&1)==1,o<6?t.set(o,8,r,!0):o<8?t.set(o+1,8,r,!0):t.set(i-15+o,8,r,!0),o<8?t.set(8,i-o-1,r,!0):o<9?t.set(8,15-o-1+1,r,!0):t.set(8,15-o-1,r,!0);t.set(i-8,8,1,!0)}function ey(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw Error("Invalid hex color: "+t);(3===e.length||4===e.length)&&(e=Array.prototype.concat.apply([],e.map(function(t){return[t,t]}))),6===e.length&&e.push("F","F");let n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+e.slice(0,6).join("")}}function ev(t,e){let n=t.a/255,o=e+'="'+t.hex+'"';return n<1?o+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':o}function eC(t,e,n){let o=t+e;return void 0!==n&&(o+=" "+n),o}function ew(t,e,n,o,r){let i=[].slice.call(arguments,1),s=i.length,a="function"==typeof i[s-1];if(!a&&!tq())throw Error("Callback required as last argument");if(a){if(s<2)throw Error("Too few arguments provided");2===s?(r=n,n=e,e=o=void 0):3===s&&(e.getContext&&void 0===r?(r=o,o=void 0):(r=o,o=n,n=e,e=void 0))}else{if(s<1)throw Error("Too few arguments provided");return 1===s?(n=e,e=o=void 0):2!==s||e.getContext||(o=n,n=e,e=void 0),new Promise(function(r,i){try{let i=f(n,o);r(t(i,e,o))}catch(t){i(t)}})}try{let i=f(n,o);r(null,t(i,e,o))}catch(t){r(t)}}eu=ed,tp=function(t){return t.reduce(function(t,e){return"string"==typeof e?t.push(em(e,null)):e.data&&t.push(em(e.data,e.mode)),t},[])},tm=function(t,e){let n=function(t,e){let n={},o={start:{}},r=["start"];for(let i=0;i<t.length;i++){let s=t[i],a=[];for(let t=0;t<s.length;t++){let l=s[t],c=""+i+t;a.push(c),n[c]={node:l,lastCount:0},o[c]={};for(let t=0;t<r.length;t++){let i=r[t];n[i]&&n[i].node.mode===l.mode?(o[i][c]=ep(n[i].lastCount+l.length,l.mode)-ep(n[i].lastCount,l.mode),n[i].lastCount+=l.length):(n[i]&&(n[i].lastCount=l.length),o[i][c]=ep(l.length,l.mode)+4+tt(l.mode,e))}}r=a}for(let t=0;t<r.length;t++)o[r[t]].end=0;return{map:o,table:n}}(function(t){let e=[];for(let n=0;n<t.length;n++){let o=t[n];switch(o.mode){case Q:e.push([o,{data:o.data,mode:V,length:o.length},{data:o.data,mode:X,length:o.length}]);break;case V:e.push([o,{data:o.data,mode:X,length:o.length}]);break;case W:e.push([o,{data:o.data,mode:X,length:eh(o.data)}]);break;case X:e.push([{data:o.data,mode:X,length:eh(o.data)}])}}return e}(eg(t,y())),e),o=eu.find_path(n.map,"start","end"),r=[];for(let t=1;t<o.length-1;t++)r.push(n.table[o[t]].node);return tp(r.reduce(function(t,e){let n=t.length-1>=0?t[t.length-1]:null;return n&&n.mode===e.mode?t[t.length-1].data+=e.data:t.push(e),t},[]))},tE=function(t){return tp(eg(t,y()))},f=function(t,e){let n,o;if(void 0===t||""===t)throw Error("No input text");let r=w;return void 0!==e&&(r=N(e.errorCorrectionLevel,w),n=K(e.version),o=M(e.maskPattern),e.toSJISFunc&&E(e.toSJISFunc)),function(t,e,n,o){let r;if(Array.isArray(t))r=tp(t);else if("string"==typeof t){let o=e;o||(o=z(tE(t),n)),r=tm(t,o||40)}else throw Error("Invalid data");let i=z(r,n);if(!i)throw Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<i)throw Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+i+".\n")}else e=i;let s=function(t,e,n){let o=new tY;n.forEach(function(e){o.put(e.mode.bit,4),o.put(e.getLength(),tt(e.mode,t)),e.write(o)});let r=(p(t)-$(t,e))*8;for(o.getLengthInBits()+4<=r&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(0);let i=(r-o.getLengthInBits())/8;for(let t=0;t<i;t++)o.put(t%2?17:236,8);return function(t,e,n){let o,r;let i=p(e),s=i-$(e,n),a=U(e,n),l=i%a,c=a-l,u=Math.floor(i/a),d=Math.floor(s/a),h=d+1,f=u-d,g=new tZ(f),m=0,E=Array(a),y=Array(a),v=0,C=new Uint8Array(t.buffer);for(let t=0;t<a;t++){let e=t<c?d:h;E[t]=C.slice(m,m+e),y[t]=g.encode(E[t]),m+=e,v=Math.max(v,e)}let w=new Uint8Array(i),I=0;for(o=0;o<v;o++)for(r=0;r<a;r++)o<E[r].length&&(w[I++]=E[r][o]);for(o=0;o<f;o++)for(r=0;r<a;r++)w[I++]=y[r][o];return w}(o,t,e)}(e,n,r),a=g(e),l=new tJ(a);return function(t,e){let n=t.size,o=b(e);for(let e=0;e<o.length;e++){let r=o[e][0],i=o[e][1];for(let e=-1;e<=7;e++)if(!(r+e<=-1)&&!(n<=r+e))for(let o=-1;o<=7;o++)i+o<=-1||n<=i+o||(e>=0&&e<=6&&(0===o||6===o)||o>=0&&o<=6&&(0===e||6===e)||e>=2&&e<=4&&o>=2&&o<=4?t.set(r+e,i+o,!0,!0):t.set(r+e,i+o,!1,!0))}}(l,e),function(t){let e=t.size;for(let n=8;n<e-8;n++){let e=n%2==0;t.set(n,6,e,!0),t.set(6,n,e,!0)}}(l),function(t,e){let n=A(e);for(let e=0;e<n.length;e++){let o=n[e][0],r=n[e][1];for(let e=-2;e<=2;e++)for(let n=-2;n<=2;n++)-2===e||2===e||-2===n||2===n||0===e&&0===n?t.set(o+e,r+n,!0,!0):t.set(o+e,r+n,!1,!0)}}(l,e),eE(l,n,0),e>=7&&function(t,e){let n,o,r;let i=t.size,s=J(e);for(let e=0;e<18;e++)n=Math.floor(e/3),o=e%3+i-8-3,r=(s>>e&1)==1,t.set(n,o,r,!0),t.set(o,n,r,!0)}(l,e),function(t,e){let n=t.size,o=-1,r=n-1,i=7,s=0;for(let a=n-1;a>0;a-=2)for(6===a&&a--;;){for(let n=0;n<2;n++)if(!t.isReserved(r,a-n)){let o=!1;s<e.length&&(o=(e[s]>>>i&1)==1),t.set(r,a-n,o),-1==--i&&(s++,i=7)}if((r+=o)<0||n<=r){r-=o,o=-o;break}}}(l,s),isNaN(o)&&(o=D(l,eE.bind(null,l,n))),F(o,l),eE(l,n,o),{modules:l,version:e,errorCorrectionLevel:n,maskPattern:o,segments:r}}(t,n,r,o)},tC=function(t){t||(t={}),t.color||(t.color={});let e=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,n=t.width&&t.width>=21?t.width:void 0,o=t.scale||4;return{width:n,scale:n?4:o,margin:e,color:{dark:ey(t.color.dark||"#000000ff"),light:ey(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},tw=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},tI=function(t,e){let n=tw(t,e);return Math.floor((t+2*e.margin)*n)},tO=function(t,e,n){let o=e.modules.size,r=e.modules.data,i=tw(o,n),s=Math.floor((o+2*n.margin)*i),a=n.margin*i,l=[n.color.light,n.color.dark];for(let e=0;e<s;e++)for(let c=0;c<s;c++){let u=(e*s+c)*4,d=n.color.light;e>=a&&c>=a&&e<s-a&&c<s-a&&(d=l[r[Math.floor((e-a)/i)*o+Math.floor((c-a)/i)]?1:0]),t[u++]=d.r,t[u++]=d.g,t[u++]=d.b,t[u]=d.a}},ty=function(t,e,n){var o;let r=n,i=e;void 0!==r||e&&e.getContext||(r=e,e=void 0),e||(i=function(){try{return document.createElement("canvas")}catch(t){throw Error("You need to specify a canvas element")}}()),r=tC(r);let s=tI(t.modules.size,r),a=i.getContext("2d"),l=a.createImageData(s,s);return tO(l.data,t,r),o=i,a.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=s,o.width=s,o.style.height=s+"px",o.style.width=s+"px",a.putImageData(l,0,0),i},tv=function(t,e,n){let o=n;void 0!==o||e&&e.getContext||(o=e,e=void 0),o||(o={});let r=ty(t,e,o),i=o.type||"image/png",s=o.rendererOpts||{};return r.toDataURL(i,s.quality)},tT=function(t,e,n){let o=tC(e),r=t.modules.size,i=t.modules.data,s=r+2*o.margin,a=o.color.light.a?"<path "+ev(o.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",l="<path "+ev(o.color.dark,"stroke")+' d="'+function(t,e,n){let o="",r=0,i=!1,s=0;for(let a=0;a<t.length;a++){let l=Math.floor(a%e),c=Math.floor(a/e);l||i||(i=!0),t[a]?(s++,a>0&&l>0&&t[a-1]||(o+=i?eC("M",l+n,.5+c+n):eC("m",r,0),r=0,i=!1),l+1<e&&t[a+1]||(o+=eC("h",s),s=0)):r++}return o}(i,r,o.margin)+'"/>',c='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+('viewBox="0 0 '+s)+" "+s+'" shape-rendering="crispEdges">'+a+l+"</svg>\n";return"function"==typeof n&&n(null,c),c},ew.bind(null,ty),ew.bind(null,tv),ew.bind(null,function(t,e,n){return tT(t,n)}),(e=tN||(tN={})).STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object",(n=t_||(t_={})).LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python",(o=tA||(tA={})).OUTCOME_UNSPECIFIED="outcome_unspecified",o.OUTCOME_OK="outcome_ok",o.OUTCOME_FAILED="outcome_failed",o.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=["user","model","function","system"];(r=tb||(tb={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",(i=tR||(tR={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",(s=tS||(tS={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",s.NEGLIGIBLE="NEGLIGIBLE",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH",(a=tM||(tM={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",a.SAFETY="SAFETY",a.OTHER="OTHER",(l=tx||(tx={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",l.STOP="STOP",l.MAX_TOKENS="MAX_TOKENS",l.SAFETY="SAFETY",l.RECITATION="RECITATION",l.LANGUAGE="LANGUAGE",l.OTHER="OTHER",(c=tL||(tL={})).TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",c.RETRIEVAL_QUERY="RETRIEVAL_QUERY",c.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",c.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",c.CLASSIFICATION="CLASSIFICATION",c.CLUSTERING="CLUSTERING",(u=tB||(tB={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",u.AUTO="AUTO",u.ANY="ANY",u.NONE="NONE",(d=tP||(tP={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",d.MODE_DYNAMIC="MODE_DYNAMIC";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class eT extends eO{constructor(t,e){super(t),this.response=e}}class eN extends eO{constructor(t,e,n,o){super(t),this.status=e,this.statusText=n,this.errorDetails=o}}class e_ extends eO{}(h=tF||(tF={})).GENERATE_CONTENT="generateContent",h.STREAM_GENERATE_CONTENT="streamGenerateContent",h.COUNT_TOKENS="countTokens",h.EMBED_CONTENT="embedContent",h.BATCH_EMBED_CONTENTS="batchEmbedContents";class eA{constructor(t,e,n,o,r){this.model=t,this.task=e,this.apiKey=n,this.stream=o,this.requestOptions=r}toString(){var t,e;let n=(null===(t=this.requestOptions)||void 0===t?void 0:t.apiVersion)||"v1beta",o=(null===(e=this.requestOptions)||void 0===e?void 0:e.baseUrl)||"https://generativelanguage.googleapis.com",r=`${o}/${n}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}async function eb(t){var e;let n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",function(t){let e=[];return(null==t?void 0:t.apiClient)&&e.push(t.apiClient),e.push("genai-js/0.21.0"),e.join(" ")}(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let o=null===(e=t.requestOptions)||void 0===e?void 0:e.customHeaders;if(o){if(!(o instanceof Headers))try{o=new Headers(o)}catch(t){throw new e_(`unable to convert customHeaders value ${JSON.stringify(o)} to Headers: ${t.message}`)}for(let[t,e]of o.entries()){if("x-goog-api-key"===t)throw new e_(`Cannot set reserved header name ${t}`);if("x-goog-api-client"===t)throw new e_(`Header name ${t} can only be set using the apiClient field`);n.append(t,e)}}return n}async function eR(t,e,n,o,r,i){let s=new eA(t,e,n,o,i);return{url:s.toString(),fetchOptions:Object.assign(Object.assign({},function(t){let e={};if((null==t?void 0:t.signal)!==void 0||(null==t?void 0:t.timeout)>=0){let n=new AbortController;(null==t?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),(null==t?void 0:t.signal)&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}(i)),{method:"POST",headers:await eb(s),body:r})}}async function eS(t,e,n,o,r,i={},s=fetch){let{url:a,fetchOptions:l}=await eR(t,e,n,o,r,i);return eM(a,l,s)}async function eM(t,e,n=fetch){let o;try{o=await n(t,e)}catch(e){!function(t,e){let n=t;throw t instanceof eN||t instanceof e_||((n=new eO(`Error fetching from ${e.toString()}: ${t.message}`)).stack=t.stack),n}(e,t)}return o.ok||await ex(o,t),o}async function ex(t,e){let n,o="";try{let e=await t.json();o=e.error.message,e.error.details&&(o+=` ${JSON.stringify(e.error.details)}`,n=e.error.details)}catch(t){}throw new eN(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${o}`,t.status,t.statusText,n)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),eF(t.candidates[0]))throw new eT(`${eD(t)}`,t);return function(t){var e,n,o,r;let i=[];if(null===(n=null===(e=t.candidates)||void 0===e?void 0:e[0].content)||void 0===n?void 0:n.parts)for(let e of null===(r=null===(o=t.candidates)||void 0===o?void 0:o[0].content)||void 0===r?void 0:r.parts)e.text&&i.push(e.text),e.executableCode&&i.push("\n```"+e.executableCode.language+"\n"+e.executableCode.code+"\n```\n"),e.codeExecutionResult&&i.push("\n```\n"+e.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}(t)}if(t.promptFeedback)throw new eT(`Text not available. ${eD(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),eF(t.candidates[0]))throw new eT(`${eD(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),eB(t)[0]}if(t.promptFeedback)throw new eT(`Function call not available. ${eD(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),eF(t.candidates[0]))throw new eT(`${eD(t)}`,t);return eB(t)}if(t.promptFeedback)throw new eT(`Function call not available. ${eD(t)}`,t)},t}function eB(t){var e,n,o,r;let i=[];if(null===(n=null===(e=t.candidates)||void 0===e?void 0:e[0].content)||void 0===n?void 0:n.parts)for(let e of null===(r=null===(o=t.candidates)||void 0===o?void 0:o[0].content)||void 0===r?void 0:r.parts)e.functionCall&&i.push(e.functionCall);return i.length>0?i:void 0}const eP=[tx.RECITATION,tx.SAFETY,tx.LANGUAGE];function eF(t){return!!t.finishReason&&eP.includes(t.finishReason)}function eD(t){var e,n,o;let r="";if((!t.candidates||0===t.candidates.length)&&t.promptFeedback)r+="Response was blocked",(null===(e=t.promptFeedback)||void 0===e?void 0:e.blockReason)&&(r+=` due to ${t.promptFeedback.blockReason}`),(null===(n=t.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(r+=`: ${t.promptFeedback.blockReasonMessage}`);else if(null===(o=t.candidates)||void 0===o?void 0:o[0]){let e=t.candidates[0];eF(e)&&(r+=`Candidate was blocked due to ${e.finishReason}`,e.finishMessage&&(r+=`: ${e.finishMessage}`))}return r}function eU(t){return this instanceof eU?(this.v=t,this):new eU(t)}"function"==typeof SuppressedError&&SuppressedError;/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function ek(t){let e=[],n=t.getReader();for(;;){let{done:t,value:o}=await n.read();if(t)return eL(function(t){let e=t[t.length-1],n={promptFeedback:null==e?void 0:e.promptFeedback};for(let e of t){if(e.candidates)for(let t of e.candidates){let e=t.index;if(n.candidates||(n.candidates=[]),n.candidates[e]||(n.candidates[e]={index:t.index}),n.candidates[e].citationMetadata=t.citationMetadata,n.candidates[e].groundingMetadata=t.groundingMetadata,n.candidates[e].finishReason=t.finishReason,n.candidates[e].finishMessage=t.finishMessage,n.candidates[e].safetyRatings=t.safetyRatings,t.content&&t.content.parts){n.candidates[e].content||(n.candidates[e].content={role:t.content.role||"user",parts:[]});let o={};for(let r of t.content.parts)r.text&&(o.text=r.text),r.functionCall&&(o.functionCall=r.functionCall),r.executableCode&&(o.executableCode=r.executableCode),r.codeExecutionResult&&(o.codeExecutionResult=r.codeExecutionResult),0===Object.keys(o).length&&(o.text=""),n.candidates[e].content.parts.push(o)}}e.usageMetadata&&(n.usageMetadata=e.usageMetadata)}return n}(e));e.push(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eH(t,e,n,o){return function(t){let[e,n]=(function(t){let e=t.getReader();return new ReadableStream({start(t){let n="";return function o(){return e.read().then(({value:e,done:r})=>{let i;if(r){if(n.trim()){t.error(new eO("Failed to parse stream"));return}t.close();return}let s=(n+=e).match(e$);for(;s;){try{i=JSON.parse(s[1])}catch(e){t.error(new eO(`Error parsing JSON response: "${s[1]}"`));return}t.enqueue(i),s=(n=n.substring(s[0].length)).match(e$)}return o()})}()}})})(t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))).tee();return{stream:function(t){return function(t,e,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(t,e||[]),i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(t){r[t]&&(o[t]=function(e){return new Promise(function(n,o){i.push([t,e,n,o])>1||a(t,e)})})}function a(t,e){try{var n;(n=r[t](e)).value instanceof eU?Promise.resolve(n.value.v).then(l,c):u(i[0][2],n)}catch(t){u(i[0][3],t)}}function l(t){a("next",t)}function c(t){a("throw",t)}function u(t,e){t(e),i.shift(),i.length&&a(i[0][0],i[0][1])}}(this,arguments,function*(){let e=t.getReader();for(;;){let{value:t,done:n}=yield eU(e.read());if(n)break;yield yield eU(eL(t))}})}(e),response:ek(n)}}(await eS(e,tF.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),o))}async function eG(t,e,n,o){let r=await eS(e,tF.GENERATE_CONTENT,t,!1,JSON.stringify(n),o);return{response:eL(await r.json())}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(t){if(null!=t){if("string"==typeof t)return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function eq(t){let e=[];if("string"==typeof t)e=[{text:t}];else for(let n of t)"string"==typeof n?e.push({text:n}):e.push(n);return function(t){let e={role:"user",parts:[]},n={role:"function",parts:[]},o=!1,r=!1;for(let i of t)"functionResponse"in i?(n.parts.push(i),r=!0):(e.parts.push(i),o=!0);if(o&&r)throw new eO("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!o&&!r)throw new eO("No content is provided for sending chat message.");return o?e:n}(e)}function eK(t){let e;return e=t.contents?t:{contents:[eq(t)]},t.systemInstruction&&(e.systemInstruction=ej(t.systemInstruction)),e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eY=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],ez={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]},eJ="SILENT_ERROR";class eQ{constructor(t,e,n,o={}){this.model=e,this.params=n,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,(null==n?void 0:n.history)&&(function(t){let e=!1;for(let n of t){let{role:t,parts:o}=n;if(!e&&"user"!==t)throw new eO(`First content should be with role 'user', got ${t}`);if(!eI.includes(t))throw new eO(`Each item should include role field. Got ${t} but valid roles are: ${JSON.stringify(eI)}`);if(!Array.isArray(o))throw new eO("Content should have 'parts' property with an array of Parts");if(0===o.length)throw new eO("Each Content should have at least one part");let r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let t of o)for(let e of eY)e in t&&(r[e]+=1);let i=ez[t];for(let e of eY)if(!i.includes(e)&&r[e]>0)throw new eO(`Content with role '${t}' can't contain '${e}' part`);e=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,e={}){var n,o,r,i,s,a;let l;await this._sendPromise;let c=eq(t),u={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(o=this.params)||void 0===o?void 0:o.generationConfig,tools:null===(r=this.params)||void 0===r?void 0:r.tools,toolConfig:null===(i=this.params)||void 0===i?void 0:i.toolConfig,systemInstruction:null===(s=this.params)||void 0===s?void 0:s.systemInstruction,cachedContent:null===(a=this.params)||void 0===a?void 0:a.cachedContent,contents:[...this._history,c]},d=Object.assign(Object.assign({},this._requestOptions),e);return this._sendPromise=this._sendPromise.then(()=>eG(this._apiKey,this.model,u,d)).then(t=>{var e;if(t.response.candidates&&t.response.candidates.length>0){this._history.push(c);let n=Object.assign({parts:[],role:"model"},null===(e=t.response.candidates)||void 0===e?void 0:e[0].content);this._history.push(n)}else{let e=eD(t.response);e&&console.warn(`sendMessage() was unsuccessful. ${e}. Inspect response object for details.`)}l=t}),await this._sendPromise,l}async sendMessageStream(t,e={}){var n,o,r,i,s,a;await this._sendPromise;let l=eq(t),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(o=this.params)||void 0===o?void 0:o.generationConfig,tools:null===(r=this.params)||void 0===r?void 0:r.tools,toolConfig:null===(i=this.params)||void 0===i?void 0:i.toolConfig,systemInstruction:null===(s=this.params)||void 0===s?void 0:s.systemInstruction,cachedContent:null===(a=this.params)||void 0===a?void 0:a.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),e),d=eH(this._apiKey,this.model,c,u);return this._sendPromise=this._sendPromise.then(()=>d).catch(t=>{throw Error(eJ)}).then(t=>t.response).then(t=>{if(t.candidates&&t.candidates.length>0){this._history.push(l);let e=Object.assign({},t.candidates[0].content);e.role||(e.role="model"),this._history.push(e)}else{let e=eD(t);e&&console.warn(`sendMessageStream() was unsuccessful. ${e}. Inspect response object for details.`)}}).catch(t=>{t.message!==eJ&&console.error(t)}),d}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eV(t,e,n,o){return(await eS(e,tF.COUNT_TOKENS,t,!1,JSON.stringify(n),o)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eX(t,e,n,o){return(await eS(e,tF.EMBED_CONTENT,t,!1,JSON.stringify(n),o)).json()}async function eW(t,e,n,o){let r=n.requests.map(t=>Object.assign(Object.assign({},t),{model:e}));return(await eS(e,tF.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:r}),o)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eZ{constructor(t,e,n={}){this.apiKey=t,this._requestOptions=n,e.model.includes("/")?this.model=e.model:this.model=`models/${e.model}`,this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=ej(e.systemInstruction),this.cachedContent=e.cachedContent}async generateContent(t,e={}){var n;let o=eK(t),r=Object.assign(Object.assign({},this._requestOptions),e);return eG(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},o),r)}async generateContentStream(t,e={}){var n;let o=eK(t),r=Object.assign(Object.assign({},this._requestOptions),e);return eH(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},o),r)}startChat(t){var e;return new eQ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(e=this.cachedContent)||void 0===e?void 0:e.name},t),this._requestOptions)}async countTokens(t,e={}){let n=function(t,e){var n;let o={model:null==e?void 0:e.model,generationConfig:null==e?void 0:e.generationConfig,safetySettings:null==e?void 0:e.safetySettings,tools:null==e?void 0:e.tools,toolConfig:null==e?void 0:e.toolConfig,systemInstruction:null==e?void 0:e.systemInstruction,cachedContent:null===(n=null==e?void 0:e.cachedContent)||void 0===n?void 0:n.name,contents:[]},r=null!=t.generateContentRequest;if(t.contents){if(r)throw new e_("CountTokensRequest must have one of contents or generateContentRequest, not both.");o.contents=t.contents}else if(r)o=Object.assign(Object.assign({},o),t.generateContentRequest);else{let e=eq(t);o.contents=[e]}return{generateContentRequest:o}}(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),e);return eV(this.apiKey,this.model,n,o)}async embedContent(t,e={}){let n="string"==typeof t||Array.isArray(t)?{content:eq(t)}:t,o=Object.assign(Object.assign({},this._requestOptions),e);return eX(this.apiKey,this.model,n,o)}async batchEmbedContents(t,e={}){let n=Object.assign(Object.assign({},this._requestOptions),e);return eW(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(t){this.apiKey=t}getGenerativeModel(t,e){if(!t.model)throw new eO("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new eZ(this.apiKey,t,e)}getGenerativeModelFromCachedContent(t,e,n){if(!t.name)throw new e_("Cached content must contain a `name` field.");if(!t.model)throw new e_("Cached content must contain a `model` field.");for(let n of["model","systemInstruction"])if((null==e?void 0:e[n])&&t[n]&&(null==e?void 0:e[n])!==t[n]){if("model"===n&&(e.model.startsWith("models/")?e.model.replace("models/",""):e.model)===(t.model.startsWith("models/")?t.model.replace("models/",""):t.model))continue;throw new e_(`Different value for "${n}" specified in modelParams (${e[n]}) and cachedContent (${t[n]})`)}let o=Object.assign(Object.assign({},e),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new eZ(this.apiKey,o,n)}}(0,tH.auth).onAuthStateChanged(async t=>{t&&await no()});const e1=document.getElementById("logoutBtn"),e2=document.getElementById("chatbotModal"),e4=document.getElementById("closeChatbot"),e3=document.getElementById("chatInput"),e8=document.getElementById("sendChat"),e5=document.getElementById("chatbotMessages"),e6=document.getElementById("addTransactionBtn"),e7=document.getElementById("transactionModal"),e9=document.getElementById("transactionForm"),nt=document.getElementById("cancelBtn"),ne=document.getElementById("transactionsList"),nn=document.getElementById("generateQRCodeBtn");async function no(){let t=tH.auth.currentUser;if(!t){console.log("No user is currently logged in.");return}try{console.log("Loading transactions for user:",t.uid);let e=await (0,tj.getDocs)((0,tj.query)((0,tj.collection)(tH.db,"transactions"),(0,tj.where)("userId","==",t.uid))),n=0,o=0;if(ne.innerHTML="",e.empty){console.log("No transactions found for the user."),ne.innerHTML="No transactions yet";return}e.forEach(t=>{let e=t.data();console.log("Transaction data:",e),"income"===e.type?n+=Number.parseFloat(e.amount):o+=Number.parseFloat(e.amount);let r=document.createElement("div");r.className=`transaction ${e.type}`,r.innerHTML=`${e.description} ${"income"===e.type?"+":"-"}$${Number.parseFloat(e.amount).toFixed(2)}`;let i=document.createElement("button");i.textContent="Delete",i.className="delete-btn",i.addEventListener("click",async()=>{try{await (0,tj.deleteDoc)((0,tj.doc)(tH.db,"transactions",t.id)),ns("Transaction deleted successfully!"),no()}catch(t){console.error("Error deleting transaction:",t.message),ns("Error deleting transaction: "+t.message,"error")}}),r.appendChild(i),ne.appendChild(r)}),document.getElementById("totalBalance").textContent=`$${(n-o).toFixed(2)}`,document.getElementById("totalIncome").textContent=`$${n.toFixed(2)}`,document.getElementById("totalExpenses").textContent=`$${o.toFixed(2)}`}catch(t){console.error("Error loading transactions:",t.message),ns("Error loading transactions: "+t.message,"error")}}async function nr(t){try{let e=new e0("AIzaSyBhm6u2K38LIE47GCX-QHhecGuQ9N4-a_w").getGenerativeModel({model:"gemini-1.5-flash"});return(await e.generateContent(t)).response.text()}catch(t){return console.error("Error calling Gemini AI:",t),"Error: Unable to process your request. Please try again later."}}function ni(t,e){let n=document.createElement("div");n.className="chat-message",n.innerHTML=`${t}: ${e}`,e5.appendChild(n),e5.scrollTop=e5.scrollHeight}function ns(t,e="success"){let n=document.createElement("div");n.className=`toast ${e}`,n.textContent=t,document.getElementById("toastContainer").appendChild(n),setTimeout(()=>n.remove(),3e3)}e1.addEventListener("click",()=>{(0,tG.signOut)(tH.auth).then(()=>{console.log("Signed out successfully!"),window.location.href="index.html"}).catch(t=>{console.error("Error signing out:",t.message)})}),nn.addEventListener("click",()=>{document.getElementById("qrcode").style.display="block"}),e6.addEventListener("click",()=>{e7.classList.add("active")}),nt.addEventListener("click",()=>{e7.classList.remove("active"),e9.reset()}),e9.addEventListener("submit",async t=>{t.preventDefault();let e=t.target.description.value,n=parseFloat(t.target.amount.value),o=t.target.type.value,r=tH.auth.currentUser;if(!r){console.log("User not logged in.");return}if(!e||isNaN(n)||!o){console.log("Invalid form data.");return}try{await (0,tj.addDoc)((0,tj.collection)(tH.db,"transactions"),{description:e,amount:n,type:o,userId:r.uid,createdAt:new Date}),ns("Transaction added successfully!"),no(),e7.classList.remove("active"),e9.reset()}catch(t){console.error("Error adding transaction:",t.message),ns("Error adding transaction: "+t.message,"error")}}),document.getElementById("chatbotButton").addEventListener("click",()=>{e2.classList.toggle("hidden")}),e4.addEventListener("click",()=>{e2.classList.add("hidden")}),e8.addEventListener("click",async()=>{let t=e3.value.trim();if(t){ni("You",t),e3.value="";try{let e=await nr(t);ni("Gemini AI",e)}catch(t){ns("Error processing chat request: "+t.message,"error")}}});
//# sourceMappingURL=transactions.df294d27.js.map
